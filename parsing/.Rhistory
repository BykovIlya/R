library("AER")
library("ggplot2")
library("caret")
library("erer")
library("lmtest")
library("sandwich")
library("forecast")
library("lubridate") # работа с датами
library("zoo") # временные ряды
library("xts") # еще ряды
library("dplyr") # манипуляции с данными
library("ggplot2") # графики
library("forecast")
library("quantmod") # загрузка с finance.google.com
library("sophisthse") # загрузка с sophist.hse.ru
set.seed(123)
y<-arima.sim(model = list(ar = c(0.5, 0.1), ma = c(0.3,0.2)), n = 100)
# автоматический подбор модели по штрафному критерию
mod_a <- auto.arima(y)
summary(mod_a)
set.seed(123)
y<-arima.sim(model = list(ar = c(0.5, 0.1), ma = c(0.3,0.2)), n = 100)
# автоматический подбор модели по штрафному критерию
mod_a <- auto.arima(y)
summary(mod_a)
y<-arima.sim(model = list(ar = c(0.5, 0.1), ma = c(0.3,0.2)), n = 100)
library("AER")
library("ggplot2")
library("caret")
library("erer")
library("lmtest")
library("sandwich")
library("forecast")
set.seed(123)
y<-arima.sim(model = list(ar = c(0.5, 0.1), ma = c(0.3,0.2)), n = 100)
set.seed(123)
y<-arima.sim(model = list(ar = c(0.5, 0.1), ma = c(0.3,0.2)), n = 100)
mod_a <- Arima(y, order=c(1,1,2))
summary(mod_a)
mod_a <- Arima(y, order=c(1,1,0))
summary(mod_a)
mod_a <- Arima(y, order=c(0,1,2))
summary(mod_a)
mod_a <- Arima(y, order=c(1,1,1))
summary(mod_a)
mod_a <- Arima(y, order=c(3,0,3), fixed = c(0, NA, NA, 0, NA, NA, NA))
summary(mod_a)
data("CollegeDistance")
h <- CollegeDistance
set.seed(42)
data("CollegeDistance")
y <- CollegeDistance
View(y)
data("CollegeDistance")
y <- CollegeDistance
set.seed(42)
# создадим разбиение данных, отберем 75% случайных номеров
in_train <- createDataPartition(y = y$wage, p = 0.9, list=FALSE)
h2_train <- h2[in_train,] # отберем обучающую часть выборки
h2_test <- h2[-in_train,] # оставшееся пойдет в тестовую часть выборки
data("CollegeDistance")
y <- CollegeDistance
set.seed(42)
# создадим разбиение данных, отберем 75% случайных номеров
in_train <- createDataPartition(y = y$wage, p = 0.9, list=FALSE)
h2_train <- y[in_train,] # отберем обучающую часть выборки
h2_test <- y[-in_train,] # оставшееся пойдет в тестовую часть выборки
model_1 <- lm(data=h2_train, wage~gender+ethnicity+unemp + education + region)
pred_1 <- predict(model_1, h2_test)
# посчитаем руками суммы квадратов остатков по тестовой выборке
sum( (pred_1 - h2_test$logprice)^2)
sum( (pred_1 - h2_test$wage)^2)
summary(model_1)
model_iv <- ivreg(data=y, wage~gender+ethnicity+unemp + education + region | education )
coeftest(model_iv) # здесь стандартные ошибки --- корректные
model_iv <- ivreg(data=y, wage~gender+ethnicity+unemp + education + region | region + gender + ethnicity + unemp + distance )
coeftest(model_iv) # здесь стандартные ошибки --- корректные
pred_1 <- predict(model_iv, h2_test)
pred_1
pred_1[1,]
pred_1[1]
setwd("~/GitHub/R/parsing/App-1")
setwd("C:/Users/Екатерина/Documents/GitHub/R/parsing")
# Download packages
#install.packages("rvest")
#install.packages("shiny")
# Init packages
library("rvest")
library("shiny")
library("XML")
pg <- htmlParse("http://www.bvl.com.pe/includes/empresas_todas.dat")
pg %>% html_nodes("a") %>% html_attr("href")
lego_movie <- html("http://www.imdb.com/title/tt1490017/")
lego_movie <- html("http://www.imdb.com/title/tt1490017/")
lego_movie %>%
html_node("strong span") %>%
html_text() %>%
as.numeric()
lego_movie %>%
html_node("div h4") %>%
html_text() %>%
as.numeric()
lego_movie %>%
html_node("div h4") %>%
html_text() %>%
html_text()
lego_movie <- html("http://www.imdb.com/title/tt1490017/")
lego_movie %>%
html_node("div h4") %>%
html_text()
lego_movie <- html("http://www.imdb.com/title/tt1490017/")
lego_movie %>% html_nodes("div h2") %>% html_attr("href")
lego_movie %>% html_node("div h2") %>% html_attr("href")
lego_movie %>% html_nodes(".header a") %>% html_attr("href")
apple_start_page <- html("https://itunes.apple.com/us/genre/ios-reference/id6006?mt=8")
apple_start_page %>% html_nodes("li a") %>% html_attr("href")
apple_start_page %>% html_nodes("li a .top-level-genre") %>% html_attr("href")
apple_start_page %>% html_nodes(".top-level-genre") %>% html_attr("href")
apple_start_page %>% html_node(".top-level-genre") %>% html_text()
apple_start_page <- html("https://itunes.apple.com/us/genre/ios-reference/id6006?mt=8")
apple_start_page %>% html_node(".top-level-genre") %>% html_text()
apple_start_page %>% html_nodes(".top-level-genre") %>% html_attr("href")
apple_start_page %>% html_node("li a") %>% html_text()
apple_start_page %>% html_nodes("#li ") %>% html_text()
apple_start_page %>% html_nodes("#li a") %>% html_text()
apple_start_page %>% html_nodes("#a") %>% html_text()
apple_start_page %>% html_nodes("#li a .top-level-genre") %>% html_text()
apple_start_page %>% html_nodes(".top-level-genre") %>% html_text()
apple_start_page <- html("https://itunes.apple.com/us/genre/ios-reference/id6006?mt=8")
apple_start_page %>% html_nodes(".top-level-genre") %>% html_text()
apple_start_page %>% html_nodes(".top-level-genre") %>% html_attr("href")
apple_category <- as.data.frame(apple_start_page %>% html_nodes(".top-level-genre") %>% html_text())
View(apple_category)
names(apple_category) <- c("x1")
View(apple_category)
apple_start_page <- html("https://itunes.apple.com/us/genre/ios-reference/id6006?mt=8")
apple_category <- as.data.frame(apple_start_page %>% html_nodes(".top-level-genre") %>% html_text())
names(apple_category) <- c("category")
View(apple_category)
apple_start_page %>% html_nodes(".top-level-genre") %>% html_attr("href")
for (i in 1:nrow(apple_category)) apple_category[i, 2] <- apple_start_page %>% html_nodes(".top-level-genre") %>% html_attr("href")
View(apple_category)
for (i in 1:(nrow(apple_category))) apple_category[i, 2] <- apple_start_page %>% html_nodes(".top-level-genre") %>% html_attr("href")
apple_category_link<- apple_start_page %>% html_nodes(".top-level-genre") %>% html_attr("href")
apple_category_link<- as.data.frame(apple_start_page %>% html_nodes(".top-level-genre") %>% html_attr("href"))
View(apple_category_link)
names(apple_category_link) <- c("category_link")
View(apple_category_link)
View(apple_category)
x3 <- cbind(apple_category$category, apple_category_link$category)
View(`x3`)
x3 <- cbind(apple_category, apple_category_link)
View(`x3`)
apple_category <- apple_start_page %>% html_nodes(".top-level-genre") %>% html_text()
names(apple_category) <- c("category")
apple_category <- apple_start_page %>% html_nodes(".top-level-genre") %>% html_text()
apple_category_link<- apple_start_page %>% html_nodes(".top-level-genre") %>% html_attr("href")
names(apple_category_link) <- c("category_link")
apple_category <- apple_start_page %>% html_nodes(".top-level-genre") %>% html_text()
apple_category_link<- apple_start_page %>% html_nodes(".top-level-genre") %>% html_attr("href")
x3 <- cbind(apple_category, apple_category_link)
View(`x3`)
x3 <- as.data.frame(cbind(apple_category, apple_category_link))
View(`x3`)
#Взяли произвольную стартовую страницу, парсим категорию приложения
apple_start_page <- html("https://itunes.apple.com/us/genre/ios-reference/id6006?mt=8")
apple_category <- apple_start_page %>% html_nodes(".top-level-genre") %>% html_text()
apple_category_link<- apple_start_page %>% html_nodes(".top-level-genre") %>% html_attr("href")
x3 <- as.data.frame(cbind(apple_category, apple_category_link))
View(`x3`)
#Взяли произвольную стартовую страницу, парсим категорию приложения
apple_start_page <- html("https://itunes.apple.com/us/genre/ios-reference/id6006?mt=8")
apple_category <- apple_start_page %>% html_nodes(".top-level-genre") %>% html_text()
apple_category_link<- apple_start_page %>% html_nodes(".top-level-genre") %>% html_attr("href")
categories <- as.data.frame(cbind(apple_category, apple_category_link))
View(categories)
apple_start_page <- html("https://itunes.apple.com/us/genre/ios-reference/id6006?mt=8")
apple_category <- apple_start_page %>% html_nodes(".top-level-genre") %>% html_text()
apple_category_link<- apple_start_page %>% html_nodes(".top-level-genre") %>% html_attr("href")
categories <- as.data.frame(cbind(apple_category, apple_category_link))
category_page <- html("https://itunes.apple.com/us/genre/ios-books/id6018?mt=8")
category_page <- html("https://itunes.apple.com/us/genre/ios-books/id6018?mt=8")
apple_category <- apple_start_page %>% html_nodes("#selectedgenre .list") %>% html_text()
apple_category
apple_category <- apple_start_page %>% html_nodes("#selectedgenre .list a") %>% html_attr("href")
apple_category
category_page <- html("https://itunes.apple.com/us/genre/ios-navigation/id6010?mt=8")
apple_category <- apple_start_page %>% html_nodes("#selectedgenre .list a") %>% html_attr("href")
apple_category
a - c("A","B","C","D","E","F","G","H","I","J","K")
a <- c("A","B","C","D","E","F","G","H","I","J","K")
a <- c("A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","*")
paste("https://itunes.apple.com/us/genre/ios-books/id6018?mt=8", "&letter=A", sep="")
paste("https://itunes.apple.com/us/genre/ios-books/id6018?mt=8", "&letter=", a[1], sep="")
paste("https://itunes.apple.com/us/genre/ios-books/id6018?mt=8", "&letter=", a[4], sep="")
#Взяли произвольную стартовую страницу, парсим категории приложений
apple_start_page <- html("https://itunes.apple.com/us/genre/ios-reference/id6006?mt=8")
apple_category <- apple_start_page %>% html_nodes(".top-level-genre") %>% html_text()
apple_category_link<- apple_start_page %>% html_nodes(".top-level-genre") %>% html_attr("href")
categories <- as.data.frame(cbind(apple_category, apple_category_link))
View(categories)
categories[1,2]
View(categories)
categories[1,6]
categories[7,2]
category_page <- html("https://itunes.apple.com/us/genre/ios-books/id6018?mt=8")
paste(categories[1,2], "&letter=", alfabet[4], sep="")
alfabet <- c("A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","*")
paste(categories[1,2], "&letter=", alfabet[4], sep="")
for (i in 1:nrow(categories)) {
nrow(alfabet)
length(alfabet)
paste(categories[i,2], "&letter=", alfabet[4], sep="")
paste(categories[4,2], "&letter=", alfabet[4], sep="")
category_page <- html(paste(categories[4,2], "&letter=", alfabet[4], sep=""))
category_page
category_page <- html(paste(categories[4,2], "&letter=", alfabet[4], sep=""))
apps_names <- current_page %>% html_nodes("#selectedcontent a") %>% html_text()
current_page <- html(paste(categories[4,2], "&letter=", alfabet[4], sep=""))
apps_names <- current_page %>% html_nodes("#selectedcontent a") %>% html_text()
apps_names
paste(categories[4,2], "&letter=", alfabet[4], sep=""
)
app_name <- current_page %>% html_nodes("#selectedcontent a") %>% html_text()
app_link<- current_page %>% html_nodes("#selectedcontent a") %>% html_attr("href")
app_link
current_page <- html(paste(categories[4,2], "&letter=", alfabet[4], sep=""))
app_name <- current_page %>% html_nodes("#selectedcontent a") %>% html_text()
app_link <- current_page %>% html_nodes("#selectedcontent a") %>% html_attr("href")
categories <- as.data.frame(cbind(app_name, app_link))
current_page <- html(paste(categories[4,2], "&letter=", alfabet[4], sep=""))
app_name <- current_page %>% html_nodes("#selectedcontent a") %>% html_text()
app_link <- current_page %>% html_nodes("#selectedcontent a") %>% html_attr("href")
app_names_at_page <- as.data.frame(cbind(app_name, app_link))
apps <- rbind(am_R3_1, am_R3_2)
df = data.frame(n, s, b)
df = data.frame("fds","hfg")
View(df)
d <- data.frame(x = 1, y = 1:10, fac = fac)
d <- data.frame(x = 1, y = 1:10)
View(d)
d <- data.frame(x, y)
d <- data.frame(x= character(0), y= characher(0), z = character(0))
d <- data.frame(x= character(0), y= characher(10))
d <- data.frame(x= character(0), y= character(10))
d <- data.frame(x= character(0), y= character(0))
View(d)
apps <- data.frame(app_name = character(0), app_link = character(0), app_category = character(0))
#Взяли произвольную стартовую страницу, парсим категории приложений
apple_start_page <- html("https://itunes.apple.com/us/genre/ios-reference/id6006?mt=8")
apple_category <- apple_start_page %>% html_nodes(".top-level-genre") %>% html_text()
apple_category_link<- apple_start_page %>% html_nodes(".top-level-genre") %>% html_attr("href")
categories <- as.data.frame(cbind(apple_category, apple_category_link))
alfabet <- c("A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","*")
apps <- data.frame(app_name = character(0), app_link = character(0), app_category = character(0))
View(apps)
current_page <- html(paste(categories[4,2], "&letter=", alfabet[4], sep=""))
app_name <- current_page %>% html_nodes("#selectedcontent a") %>% html_text()
app_link <- current_page %>% html_nodes("#selectedcontent a") %>% html_attr("href")
app_names_at_page <- as.data.frame(cbind(app_name, app_link, categories[i,2] ))
app_names_at_page <- as.data.frame(cbind(app_name, app_link)
)
View(app_names_at_page)
for (n in 1:nrow(app_names_at_page)) app_names_at_page[i,3] <- categories[4,2]
for (n in 1:nrow(app_names_at_page)) app_names_at_page[n,3] <- categories[4,2]
View(app_names_at_page)
for (n in 1:nrow(app_names_at_page)) app_names_at_page[n,3] <- categories[4,1]
View(app_names_at_page)
View(categories)
for (n in 1:nrow(app_names_at_page)) app_names_at_page[n,3] <- categories[4,1]
warnings()
for (n in 1:nrow(app_names_at_page)) app_names_at_page[n,3] <- apple_category[4]
for (n in 1:nrow(app_names_at_page)) app_names_at_page[n,3] <- as.character(categories[4,1])
categories[4,1]
categories <- as.data.frame(cbind(as.character(apple_category), apple_category_link))
for (n in 1:nrow(app_names_at_page)) app_names_at_page[n,3] <- as.character(categories[4,1])
#Взяли произвольную стартовую страницу, парсим категории приложений
apple_start_page <- html("https://itunes.apple.com/us/genre/ios-reference/id6006?mt=8")
apple_category <- apple_start_page %>% html_nodes(".top-level-genre") %>% html_text()
apple_category_link<- apple_start_page %>% html_nodes(".top-level-genre") %>% html_attr("href")
categories <- as.data.frame(cbind(as.character(apple_category), apple_category_link))
alfabet <- c("A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","*")
apps <- data.frame(app_name = character(0), app_link = character(0), app_category = character(0))
current_page <- html(paste(categories[4,2], "&letter=", alfabet[4], sep=""))
app_name <- current_page %>% html_nodes("#selectedcontent a") %>% html_text()
app_link <- current_page %>% html_nodes("#selectedcontent a") %>% html_attr("href")
app_names_at_page <- as.data.frame(cbind(app_name, app_link))
for (n in 1:nrow(app_names_at_page)) app_names_at_page[n,3] <- as.character(categories[4,1])
View(app_names_at_page)
View(categories)
apps <- rbind(apps, app_names_at_page)
View(app_names_at_page)
apps <- rbind(apps, app_names_at_page)
apps <- rbind(apps, app_names_at_page)
apps <- rbind(apps, app_names_at_page)
View(app_names_at_page)
#Взяли произвольную стартовую страницу, парсим категории приложений
apple_start_page <- html("https://itunes.apple.com/us/genre/ios-reference/id6006?mt=8")
apple_category <- apple_start_page %>% html_nodes(".top-level-genre") %>% html_text()
apple_category_link<- apple_start_page %>% html_nodes(".top-level-genre") %>% html_attr("href")
categories <- as.data.frame(cbind(as.character(apple_category), apple_category_link))
alfabet <- c("A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","*")
apps <- data.frame(app_name = character(0), app_link = character(0), app_category = character(0))
for (i in 1:nrow(categories)) {
for (l in 1:length(alfabet)){
current_page <- html(paste(categories[i,2], "&letter=", alfabet[l], sep="")) #делаем ссылку на буквы
app_name <- current_page %>% html_nodes("#selectedcontent a") %>% html_text()
app_link <- current_page %>% html_nodes("#selectedcontent a") %>% html_attr("href")
app_names_at_page <- as.data.frame(cbind(app_name, app_link))
for (n in 1:nrow(app_names_at_page)) app_names_at_page[n,3] <- as.character(categories[i,1])
apps <- rbind(apps, app_names_at_page)
}
}
View(apps)
apps[109185,3]
apps[109183,3]
View(apps)
View(apps)
categories[3,2], "&letter=", alfabet[4], sep=""
categories[2,2], "&letter=", alfabet[4], sep=""
View(categories)
View(categories)
categories[2,2], "&letter=", alfabet[l], sep=""
parse(categories[2,2], "&letter=", alfabet[l], sep="")
paste(categories[2,2], "&letter=", alfabet[l], sep="")
current_page <- html(paste(categories[2,2], "&letter=", alfabet[l], sep=""))
current_page
current_page <- html("https://itunes.apple.com/us/genre/ios-business/id6000?mt=8&letter=*&page=16#page")
a <- current_page %>% html_nodes(".paginate-more") %>% html_text()
a
if((current_page %>% html_nodes(".paginate-more") %>% html_text())!=character(0)) b <- 0
if((current_page %>% html_nodes(".paginate-more") %>% html_text())!=character(0)) b <- 0 else b<-1
current_page <- html("https://itunes.apple.com/us/genre/ios-business/id6000?mt=8&letter=*&page=15#page")
if((current_page %>% html_nodes(".paginate-more") %>% html_text())!=character(0)) b <- 0 else b<-1
if((current_page %>% html_nodes(".paginate-more") %>% html_text())!=0) b <- 0 else b<-1
current_page <- html("https://itunes.apple.com/us/genre/ios-business/id6000?mt=8&letter=*&page=15#page")
current_page <- html("https://itunes.apple.com/us/genre/ios-business/id6000?mt=8&letter=*")
a <- 0
while(current_page %>% html_nodes(".paginate-more") %>% html_text())!=0)) {
while((current_page %>% html_nodes(".paginate-more") %>% html_text())!=0)) {
while((current_page %>% html_nodes(".paginate-more") %>% html_text())!=0) {
current_page <- html(paste(current_page, "&page=", a, "#page", sep=""))
a <- a + 1
}
current_page <- html("https://itunes.apple.com/us/genre/ios-business/id6000?mt=8&letter=*")
a <- 0
while((current_page %>% html_nodes(".paginate-more") %>% html_text())!=0) {
current_page <- html(paste(current_page, "&page=", a, "#page", sep=""))
app_name_1 <- current_page %>% html_nodes("#selectedcontent a") %>% html_text()
app_link_1 <- current_page %>% html_nodes("#selectedcontent a") %>% html_attr("href")
app_names_at_page_1 <- as.data.frame(cbind(app_name_1, app_link_1))
a <- a + 1
}
while((current_page %>% html_nodes(".paginate-more") %>% html_text())!=0) {
current_page <- html(paste(current_page, "&page=", a, sep=""))
app_name_1 <- current_page %>% html_nodes("#selectedcontent a") %>% html_text()
app_link_1 <- current_page %>% html_nodes("#selectedcontent a") %>% html_attr("href")
app_names_at_page_1 <- as.data.frame(cbind(app_name_1, app_link_1))
a <- a + 1
}
while((current_page %>% html_nodes(".paginate-more") %>% html_text())!=NULL) {
current_page <- html(paste(current_page, "&page=", a, sep=""))
app_name_1 <- current_page %>% html_nodes("#selectedcontent a") %>% html_text()
app_link_1 <- current_page %>% html_nodes("#selectedcontent a") %>% html_attr("href")
app_names_at_page_1 <- as.data.frame(cbind(app_name_1, app_link_1))
a <- a + 1
}
current_page <- html("https://itunes.apple.com/us/genre/ios-business/id6000?mt=8&letter=*")
a <- 0
while((current_page %>% html_nodes(".paginate-more") %>% html_text())!=NULL) {
current_page <- html(paste(current_page, "&page=", a, sep=""))
app_name_1 <- current_page %>% html_nodes("#selectedcontent a") %>% html_text()
app_link_1 <- current_page %>% html_nodes("#selectedcontent a") %>% html_attr("href")
app_names_at_page_1 <- as.data.frame(cbind(app_name_1, app_link_1))
a <- a + 1
}
while((current_page %>% html_nodes(".paginate-more") %>% html_text())!=is.null) {
current_page <- html(paste(current_page, "&page=", a, sep=""))
app_name_1 <- current_page %>% html_nodes("#selectedcontent a") %>% html_text()
app_link_1 <- current_page %>% html_nodes("#selectedcontent a") %>% html_attr("href")
app_names_at_page_1 <- as.data.frame(cbind(app_name_1, app_link_1))
a <- a + 1
}
while(!is.null(current_page %>% html_nodes(".paginate-more") %>% html_text())) {
current_page <- html(paste(current_page, "&page=", a, sep=""))
app_name_1 <- current_page %>% html_nodes("#selectedcontent a") %>% html_text()
app_link_1 <- current_page %>% html_nodes("#selectedcontent a") %>% html_attr("href")
app_names_at_page_1 <- as.data.frame(cbind(app_name_1, app_link_1))
a <- a + 1
}
a <- 0
while(is.not.null(current_page %>% html_nodes(".paginate-more") %>% html_text())) {
current_page <- html(paste(current_page, "&page=", a, sep=""))
app_name_1 <- current_page %>% html_nodes("#selectedcontent a") %>% html_text()
app_link_1 <- current_page %>% html_nodes("#selectedcontent a") %>% html_attr("href")
app_names_at_page_1 <- as.data.frame(cbind(app_name_1, app_link_1))
a <- a + 1
}
while(!(is.null(current_page %>% html_nodes(".paginate-more") %>% html_text()))) {
current_page <- html(paste(current_page, "&page=", a, sep=""))
app_name_1 <- current_page %>% html_nodes("#selectedcontent a") %>% html_text()
app_link_1 <- current_page %>% html_nodes("#selectedcontent a") %>% html_attr("href")
app_names_at_page_1 <- as.data.frame(cbind(app_name_1, app_link_1))
a <- a + 1
}
a <- 0
while(!is.null(current_page %>% html_nodes(".paginate-more") %>% html_text())) {
current_page <- html(paste(current_page, "&page=", a, sep=""))
app_name_1 <- current_page %>% html_nodes("#selectedcontent a") %>% html_text()
app_link_1 <- current_page %>% html_nodes("#selectedcontent a") %>% html_attr("href")
app_names_at_page_1 <- as.data.frame(cbind(app_name_1, app_link_1))
a <- a + 1
}
current_page %>% html_nodes(".paginate-more") %>% html_text()
is.null(current_page %>% html_nodes(".paginate-more") %>% html_text() )
!is.null(current_page %>% html_nodes(".paginate-more") %>% html_text() )
!is.null(current_page %>% html_nodes(".paginate-more") %>% html_text())==TRUE
a <- 0
while(!is.null(current_page %>% html_nodes(".paginate-more") %>% html_text())==TRUE) {
current_page <- html(paste(current_page, "&page=", a, sep=""))
app_name_1 <- current_page %>% html_nodes("#selectedcontent a") %>% html_text()
app_link_1 <- current_page %>% html_nodes("#selectedcontent a") %>% html_attr("href")
app_names_at_page_1 <- as.data.frame(cbind(app_name_1, app_link_1))
a <- a + 1
}
a <-  1
while(!is.null(current_page %>% html_nodes(".paginate-more") %>% html_text())==TRUE) {
current_page <- html(paste(current_page, "&page=", a, sep=""))
app_name_1 <- current_page %>% html_nodes("#selectedcontent a") %>% html_text()
app_link_1 <- current_page %>% html_nodes("#selectedcontent a") %>% html_attr("href")
app_names_at_page_1 <- as.data.frame(cbind(app_name_1, app_link_1))
a <- a + 1
}
!is.null(current_page %>% html_nodes(".paginate-more") %>% html_text())!=FALSE
!is.null(current_page %>% html_nodes(".paginate-more") %>% html_text())
current_page %>% html_nodes(".paginate-more") %>% html_text()
current_page <- html(paste(current_page, "&page=", 1, sep=""))
paste(current_page, "&page=", 1, sep="")
current_page <- html(paste(as.character(current_page), "&page=", 1, sep=""))
paste(as.character(current_page), "&page=", 1, sep="")
str(categories[1,2])
View(app_names_at_page)
View(app_names_at_page[1000,])
View(app_names_at_page[1000: 109184,])
View(app_names_at_page)
View(apps)
View(apps[10000:109184,])
paste(as.character(current_page), "&page=", 1, sep="")
current_page
a <-  1
while(!is.null(current_page %>% html_nodes(".paginate-more") %>% html_text())!=FALSE) {
current_page <- html(paste(categories[2,2], "&letter=", alfabet[3], "&page=", 1, sep=""))
app_name_1 <- current_page %>% html_nodes("#selectedcontent a") %>% html_text()
app_link_1 <- current_page %>% html_nodes("#selectedcontent a") %>% html_attr("href")
app_names_at_page_1 <- as.data.frame(cbind(app_name_1, app_link_1))
a <- a + 1
}
install.packages("rvest")
install.packages("rvest")
install.packages("rvest")
install.packages("rvest")
install.packages("rvest")
install.packages("rvest", dependencies = TRUE)
install.packages("selectr")
install.packages("rvest")
install.packages("selectr")
install.packages("httr")
#Взяли произвольную стартовую страницу, парсим категории приложений
apple_start_page <- html("https://itunes.apple.com/us/genre/ios-reference/id6006?mt=8")
apple_category <- apple_start_page %>% html_nodes(".top-level-genre") %>% html_text()
apple_category_link<- apple_start_page %>% html_nodes(".top-level-genre") %>% html_attr("href")
categories <- as.data.frame(cbind(as.character(apple_category), apple_category_link))
alfabet <- c("A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","*")
apps <- data.frame(app_name = character(0), app_link = character(0), app_category = character(0))
#Взяли произвольную стартовую страницу, парсим категории приложений
apple_start_page <- html("https://itunes.apple.com/us/genre/ios-reference/id6006?mt=8")
library("rvest")
library("XML")
#Взяли произвольную стартовую страницу, парсим категории приложений
apple_start_page <- html("https://itunes.apple.com/us/genre/ios-reference/id6006?mt=8")
apple_category <- apple_start_page %>% html_nodes(".top-level-genre") %>% html_text()
apple_category_link<- apple_start_page %>% html_nodes(".top-level-genre") %>% html_attr("href")
categories <- as.data.frame(cbind(as.character(apple_category), apple_category_link))
alfabet <- c("A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","*")
apps <- data.frame(app_name = character(0), app_link = character(0), app_category = character(0))
for (i in 1:nrow(categories)) {
set_config(use_proxy(url="155.108.4.186", port=80, username="mohaqu",password="9eW9Km4w"))
set_config(use_proxy(url="155.108.4.186", port=80, username="mohaqu",password="9eW9Km4w"))
library(rvest, lib.loc=".", verbose=TRUE)
library(selectr, lib.loc=".", verbose=TRUE)
library(httr, lib.loc=".", verbose=TRUE)
library(rvest)
library(selectr)
library(httr)
library("XML")
lego_movie <- html("http://www.imdb.com/title/tt1490017/")
library(rvest)
library(selectr)
library(httr)
library("XML")
lego_movie <- html("http://www.imdb.com/title/tt1490017/")
lego_movie %>%
html_node("div h4") %>%
html_text()
set_config(use_proxy(url="155.108.4.186", port=80, username="mohaqu",password="9eW9Km4w"))
#Взяли произвольную стартовую страницу, парсим категории приложений
apple_start_page <- html("http://itunes.apple.com/us/genre/ios-reference/id6006?mt=8")
apple_category <- apple_start_page %>% html_nodes(".top-level-genre") %>% html_text()
apple_category_link<- apple_start_page %>% html_nodes(".top-level-genre") %>% html_attr("href")
categories <- as.data.frame(cbind(as.character(apple_category), apple_category_link))
alfabet <- c("A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","*")
apps <- data.frame(app_name = character(0), app_link = character(0), app_category = character(0))
